<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1586px" preserveAspectRatio="none" style="width:1241px;height:1586px;;" version="1.1" viewBox="0 0 1241 1586" width="1241px" zoomAndPan="magnify"><title>Carrito ESP32 &#43; HC-SR04 — Secuencia general</title><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="317.5223" x="463.7075" y="29.9659">Carrito ESP32 &#43; HC-SR04 — Secuencia general</text><rect fill="none" height="433.5902" style="stroke:#000000;stroke-width:1.5;" width="1215.9372" x="10" y="115.2038"></rect><rect fill="none" height="420.8661" style="stroke:#000000;stroke-width:1.5;" width="1225.9372" x="10" y="562.794"></rect><rect fill="none" height="162.512" style="stroke:#000000;stroke-width:1.5;" width="703.0862" x="522.851" y="814.1481"></rect><rect fill="none" height="178.5301" style="stroke:#000000;stroke-width:1.5;" width="368.0674" x="516" y="997.6601"></rect><rect fill="none" height="322.0421" style="stroke:#000000;stroke-width:1.5;" width="723.0862" x="512.851" y="1190.1902"></rect><rect fill="none" height="162.512" style="stroke:#000000;stroke-width:1.5;" width="703.0862" x="522.851" y="1342.7203"></rect><g><title>Cliente</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="95.3657" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="99" x2="99" y1="98.2038" y2="1529.2323"></line></g><g><title>ESP32 WebServer</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="312.4704" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="315.8326" x2="315.8326" y1="98.2038" y2="1529.2323"></line></g><g><title>Control .loop.</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="580.8959" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="584.851" x2="584.851" y1="98.2038" y2="1529.2323"></line></g><g><title>Driver L298N</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="820.0456" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="824.0238" x2="824.0238" y1="98.2038" y2="1529.2323"></line></g><g><title>HC-SR04</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="915.1373" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="919.0674" x2="919.0674" y1="98.2038" y2="1529.2323"></line></g><g><title>Cliente MQTT</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="1011.412" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1015.2072" x2="1015.2072" y1="98.2038" y2="1529.2323"></line></g><g><title>Broker MQTT</title><rect fill="#000000" fill-opacity="0.00000" height="1431.0285" width="8" x="1161.2644" y="98.2038"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1164.5915" x2="1164.5915" y1="98.2038" y2="1529.2323"></line></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158.7315" x="20" y="45.0679"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.5698" x="76.5808" y="67.0339">Cliente</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.7315" x="27" y="86.1018">(Postman/Navegador)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158.7315" x="20" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.5698" x="76.5808" y="1550.1982">Cliente</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.7315" x="27" y="1569.2661">(Postman/Navegador)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.2755" x="251.8326" y="45.0679"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.2755" x="258.8326" y="67.0339">ESP32 WebServer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.9936" x="259.9736" y="86.1018">(/status, /control)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.2755" x="251.8326" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.2755" x="258.8326" y="1550.1982">ESP32 WebServer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.9936" x="259.9736" y="1569.2661">(/status, /control)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.0897" x="532.851" y="64.1358"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0897" x="539.851" y="86.1018">Control (loop)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.0897" x="532.851" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0897" x="539.851" y="1550.1982">Control (loop)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.0436" x="774.0238" y="45.0679"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.0436" x="781.0238" y="67.0339">Driver L298N</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6917" x="792.6997" y="86.1018">(IN1..IN4)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.0436" x="774.0238" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.0436" x="781.0238" y="1550.1982">Driver L298N</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6917" x="792.6997" y="1569.2661">(IN1..IN4)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.1398" x="884.0674" y="64.1358"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.1398" x="891.0674" y="86.1018">HC-SR04</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.1398" x="884.0674" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.1398" x="891.0674" y="1550.1982">HC-SR04</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4096" x="964.2072" y="64.1358"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4096" x="971.2072" y="86.1018">Cliente MQTT</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4096" x="964.2072" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4096" x="971.2072" y="1550.1982">Cliente MQTT</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.3457" x="1114.5915" y="64.1358"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.3457" x="1121.5915" y="86.1018">Broker MQTT</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.3457" x="1114.5915" y="1528.2323"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.3457" x="1121.5915" y="1550.1982">Broker MQTT</text></g><path d="M10,115.2038 L145.6036,115.2038 L145.6036,124.9098 L135.6036,134.9098 L10,134.9098 L10,115.2038" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="433.5902" style="stroke:#000000;stroke-width:1.5;" width="1215.9372" x="10" y="115.2038"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.6036" x="25" y="130.1008">BOOT / SETUP</text><g class="message"><polygon fill="#181818" points="304.4704,154.6158,314.4704,158.6158,304.4704,162.6158,308.4704,158.6158" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="99.3657" x2="310.4704" y1="158.6158" y2="158.6158"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="106.3657" y="152.8068">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.3281" x="118.208" y="152.8068">Reset / Power ON</text></g><g class="message"><polygon fill="#181818" points="572.8959,186.3218,582.8959,190.3218,572.8959,194.3218,576.8959,190.3218" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="316.4704" x2="578.8959" y1="190.3218" y2="190.3218"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="323.4704" y="184.5128">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.0811" x="335.3126" y="184.5128">setup()</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="239.7338" y2="239.7338"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="239.7338" y2="252.7338"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="252.7338" y2="252.7338"></line><polygon fill="#181818" points="595.8959,248.7338,585.8959,252.7338,595.8959,256.7338,591.8959,252.7338" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="591.8959" y="225.0718">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.3162" x="603.7381" y="216.2188">pinMode motores (OUT)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.3901" x="603.7381" y="233.9248">stopMotors()</text></g><g class="message"><polygon fill="#181818" points="907.1373,298.1459,917.1373,302.1459,907.1373,306.1459,911.1373,302.1459" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="913.1373" y1="302.1459" y2="302.1459"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="591.8959" y="287.4839">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.1552" x="603.7381" y="278.6308">pinMode(TRIG&#61;OUT),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.6592" x="603.7381" y="296.3369">pinMode(ECHO&#61;IN); TRIG&#61;LOW</text></g><g class="message"><polygon fill="#181818" points="327.4704,347.5579,317.4704,351.5579,327.4704,355.5579,323.4704,351.5579" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="321.4704" x2="583.8959" y1="351.5579" y2="351.5579"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="333.4704" y="336.8959">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.5832" x="345.3126" y="328.0429">WebServer: server.on(/status,/control)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.2271" x="345.3126" y="345.7489">server.begin()</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="400.9699" y2="400.9699"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="400.9699" y2="413.9699"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="413.9699" y2="413.9699"></line><polygon fill="#181818" points="595.8959,409.9699,585.8959,413.9699,595.8959,417.9699,591.8959,413.9699" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="591.8959" y="386.3079">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.8842" x="603.7381" y="377.4549">connectWiFi(SSID,PASS)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.8512" x="603.7381" y="395.1609">(wait hasta WL_CONNECTED)</text></g><g class="message"><polygon fill="#181818" points="1003.412,441.6759,1013.412,445.6759,1003.412,449.6759,1007.412,445.6759" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="1009.412" y1="445.6759" y2="445.6759"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="591.8959" y="439.8669">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.1282" x="603.7381" y="439.8669">setServer(MQTT_SERVER, PORT)</text></g><g class="message"><polygon fill="#181818" points="1003.412,473.382,1013.412,477.382,1003.412,481.382,1007.412,477.382" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="1009.412" y1="477.382" y2="477.382"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="591.8959" y="471.573">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.5281" x="603.7381" y="471.573">ensureMQTT()</text></g><g class="message"><polygon fill="#181818" points="1153.2644,505.088,1163.2644,509.088,1153.2644,513.088,1157.2644,509.088" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="1015.412" x2="1159.2644" y1="509.088" y2="509.088"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.8423" x="1022.412" y="503.279">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.0101" x="1034.2542" y="503.279">CONNECT(clientId)</text></g><g class="message"><polygon fill="#181818" points="1026.412,536.794,1016.412,540.794,1026.412,544.794,1022.412,540.794" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1020.412" x2="1164.2644" y1="540.794" y2="540.794"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="1032.412" y="534.985">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.6991" x="1052.0965" y="534.985">CONNACK</text></g><path d="M10,562.794 L264.2449,562.794 L264.2449,572.5 L254.2449,582.5 L10,582.5 L10,562.794" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="420.8661" style="stroke:#000000;stroke-width:1.5;" width="1225.9372" x="10" y="562.794"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="209.2449" x="25" y="577.691">/control (mando de movimiento)</text><g class="message"><polygon fill="#181818" points="304.4704,619.912,314.4704,623.912,304.4704,627.912,308.4704,623.912" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="99.3657" x2="310.4704" y1="623.912" y2="623.912"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="106.3657" y="609.25">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.1981" x="126.0502" y="600.397">GET /control?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.4202" x="126.0502" y="618.103">direction&#61;left&amp;duration&#61;600</text></g><g class="message"><polygon fill="#181818" points="572.8959,651.6181,582.8959,655.6181,572.8959,659.6181,576.8959,655.6181" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="316.4704" x2="578.8959" y1="655.6181" y2="655.6181"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="323.4704" y="649.8091">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.3732" x="343.1549" y="649.8091">parse(direction,duration)</text></g><g class="message"><polygon fill="#181818" points="812.0456,701.0301,822.0456,705.0301,812.0456,709.0301,816.0456,705.0301" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="818.0456" y1="705.0301" y2="705.0301"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="690.3681">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.3901" x="611.5804" y="681.5151">stopMotors()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.1771" x="611.5804" y="699.2211">(freno &#43; neutral)</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="754.4421" y2="754.4421"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="754.4421" y2="767.4421"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="767.4421" y2="767.4421"></line><polygon fill="#181818" points="595.8959,763.4421,585.8959,767.4421,595.8959,771.4421,591.8959,767.4421" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="739.7801">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.3551" x="611.5804" y="730.9271">moving&#61;true;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.6291" x="611.5804" y="748.6331">endTime &#61; now &#43; 600ms</text></g><g class="message"><polygon fill="#181818" points="812.0456,795.1481,822.0456,799.1481,812.0456,803.1481,816.0456,799.1481" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="818.0456" y1="799.1481" y2="799.1481"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="793.3391">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.8871" x="611.5804" y="793.3391">aplicar IN1..IN4 (LEFT)</text></g><path d="M522.851,814.1481 L584.4098,814.1481 L584.4098,823.8542 L574.4098,833.8542 L522.851,833.8542 L522.851,814.1481" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="162.512" style="stroke:#000000;stroke-width:1.5;" width="703.0862" x="522.851" y="814.1481"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16.5588" x="537.851" y="829.0452">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.8326" x="599.4098" y="827.9071">[MQTT conectado]</text><g class="message"><polygon fill="#181818" points="1003.412,871.2662,1013.412,875.2662,1003.412,879.2662,1007.412,875.2662" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="1009.412" y1="875.2662" y2="875.2662"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="860.6042">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.6872" x="611.5804" y="851.7512">publish(MQTT_TOPIC_CMD,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.0122" x="611.5804" y="869.4572">&#34;Direccion:left,Duracion:600,...&#34;)</text></g><g class="message"><polygon fill="#181818" points="1153.2644,902.9722,1163.2644,906.9722,1153.2644,910.9722,1157.2644,906.9722" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="1015.412" x2="1159.2644" y1="906.9722" y2="906.9722"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="1022.412" y="901.1632">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8071" x="1042.0965" y="901.1632">PUBLISH</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="522.851" x2="1225.9372" y1="915.9722" y2="915.9722"></line><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116.833" x="527.851" y="927.7311">[MQTT no conectado]</text><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="955.6601" y2="955.6601"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="955.6601" y2="968.6601"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="968.6601" y2="968.6601"></line><polygon fill="#181818" points="595.8959,964.6601,585.8959,968.6601,595.8959,972.6601,591.8959,968.6601" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="949.8511">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.9631" x="611.5804" y="949.8511">(omitir publish)</text></g><path d="M516,997.6601 L711.1631,997.6601 L711.1631,1007.3661 L701.1631,1017.3661 L516,1017.3661 L516,997.6601" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="178.5301" style="stroke:#000000;stroke-width:1.5;" width="368.0674" x="516" y="997.6601"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150.1631" x="531" y="1012.5571">Auto-stop por duración</text><path d="M526,1022.3661 L526,1049.3661 L642,1049.3661 L642,1032.3661 L632,1022.3661 L526,1022.3661" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M632,1022.3661 L632,1032.3661 L642,1032.3661 L632,1022.3661" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6281" x="532" y="1041.2631">loop() periódico</text><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="1078.7782" y2="1078.7782"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="1078.7782" y2="1091.7782"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="1091.7782" y2="1091.7782"></line><polygon fill="#181818" points="595.8959,1087.7782,585.8959,1091.7782,595.8959,1095.7782,591.8959,1091.7782" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1072.9692">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.4652" x="611.5804" y="1072.9692">if (moving &amp;&amp; millis() &gt;&#61; endTime)</text></g><g class="message"><polygon fill="#181818" points="812.0456,1119.4842,822.0456,1123.4842,812.0456,1127.4842,816.0456,1123.4842" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="818.0456" y1="1123.4842" y2="1123.4842"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1117.6752">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.3901" x="611.5804" y="1117.6752">stopMotors()</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="1155.1902" y2="1155.1902"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="1155.1902" y2="1168.1902"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="1168.1902" y2="1168.1902"></line><polygon fill="#181818" points="595.8959,1164.1902,585.8959,1168.1902,595.8959,1172.1902,591.8959,1168.1902" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1149.3812">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8811" x="611.5804" y="1149.3812">moving &#61; false</text></g><path d="M512.851,1190.1902 L586.555,1190.1902 L586.555,1199.8962 L576.555,1209.8962 L512.851,1209.8962 L512.851,1190.1902" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="322.0421" style="stroke:#000000;stroke-width:1.5;" width="723.0862" x="512.851" y="1190.1902"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.704" x="527.851" y="1205.0872">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="214.1025" x="601.555" y="1203.9491">[cada 500 ms (PUBLISH_INTERVAL_MS)]</text><g class="message"><polygon fill="#181818" points="907.1373,1229.6022,917.1373,1233.6022,907.1373,1237.6022,911.1373,1233.6022" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="913.1373" y1="1233.6022" y2="1233.6022"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1227.7932">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.7631" x="611.5804" y="1227.7932">TRIG 10µs</text></g><g class="message"><polygon fill="#181818" points="595.8959,1261.3083,585.8959,1265.3083,595.8959,1269.3083,591.8959,1265.3083" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="589.8959" x2="918.1373" y1="1265.3083" y2="1265.3083"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="601.8959" y="1259.4992">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.8172" x="621.5804" y="1259.4992">ECHO HIGH (duración µs)</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="1314.7203" y2="1314.7203"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="1314.7203" y2="1327.7203"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="1327.7203" y2="1327.7203"></line><polygon fill="#181818" points="595.8959,1323.7203,585.8959,1327.7203,595.8959,1331.7203,591.8959,1327.7203" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1300.0583">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.4081" x="611.5804" y="1291.2053">cm &#61; (dur * 0.0343) / 2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.9391" x="611.5804" y="1308.9113">clamp[min&#61;5, max&#61;300]</text></g><path d="M522.851,1342.7203 L584.4098,1342.7203 L584.4098,1352.4263 L574.4098,1362.4263 L522.851,1362.4263 L522.851,1342.7203" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="162.512" style="stroke:#000000;stroke-width:1.5;" width="703.0862" x="522.851" y="1342.7203"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16.5588" x="537.851" y="1357.6173">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.8326" x="599.4098" y="1356.4792">[MQTT conectado]</text><g class="message"><polygon fill="#181818" points="1003.412,1399.8383,1013.412,1403.8383,1003.412,1407.8383,1007.412,1403.8383" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="1009.412" y1="1403.8383" y2="1403.8383"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1389.1763">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.0832" x="611.5804" y="1380.3233">publish(MQTT_TOPIC_DISTANCE,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.2152" x="611.5804" y="1398.0293">{&#34;distance_cm&#34;:cm,&#34;ts&#34;:now})</text></g><g class="message"><polygon fill="#181818" points="1153.2644,1431.5443,1163.2644,1435.5443,1153.2644,1439.5443,1157.2644,1435.5443" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="1015.412" x2="1159.2644" y1="1435.5443" y2="1435.5443"></line><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="1022.412" y="1429.7353">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8071" x="1042.0965" y="1429.7353">PUBLISH</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="522.851" x2="1225.9372" y1="1444.5443" y2="1444.5443"></line><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116.833" x="527.851" y="1456.3033">[MQTT no conectado]</text><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="584.8959" x2="626.8959" y1="1484.2323" y2="1484.2323"></line><line style="stroke:#181818;stroke-width:1;" x1="626.8959" x2="626.8959" y1="1484.2323" y2="1497.2323"></line><line style="stroke:#181818;stroke-width:1;" x1="585.8959" x2="626.8959" y1="1497.2323" y2="1497.2323"></line><polygon fill="#181818" points="595.8959,1493.2323,585.8959,1497.2323,595.8959,1501.2323,591.8959,1497.2323" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6845" x="591.8959" y="1478.4233">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6911" x="611.5804" y="1478.4233">(skip publish)</text></g></g></svg>